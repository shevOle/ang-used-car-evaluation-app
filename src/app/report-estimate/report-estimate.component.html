<section class="estimate-page">
  <form
    class="estimate-page-form"
    [formGroup]="estimateForm"
    (submit)="submitEstimateForm()"
  >
    <div class="estimate-page-form-input-box text">
      <div class="estimate-page-form-input">
        <label for="estimate-page-input-make">Manufacturer</label>
        <input
          id="estimate-page-input-make"
          type="text"
          formControlName="make"
          required
        />
        <div
          class="estimate-page-form-input-errors"
          *ngIf="make.invalid && make.touched && make.dirty"
        >
          <p *ngIf="make.errors?.['required']">Field is required.</p>
          <p *ngIf="make.errors?.['invalid']">Field should be a string.</p>
        </div>
      </div>

      <div class="estimate-page-form-input">
        <label for="estimate-page-input-model">Model</label>
        <input
          id="estimate-page-input-model"
          type="text"
          formControlName="model"
          required
        />
      </div>
      <div
        class="estimate-page-form-input-errors"
        *ngIf="model.invalid && model.touched && model.dirty"
      >
        <p *ngIf="model.errors?.['required']">Field is required.</p>
        <p *ngIf="model.errors?.['invalid']">Field should be a string.</p>
      </div>
    </div>

    <div class="estimate-page-form-input-box number">
      <div class="estimate-page-form-input">
        <label for="estimate-page-input-year">Production year</label>
        <input
          id="estimate-page-input-year"
          type="number"
          formControlName="year"
          required
        />
        <div
          class="estimate-page-form-input-errors"
          *ngIf="year.invalid && year.touched && year.dirty"
        >
          <p *ngIf="year.errors?.['required']">Field is required.</p>
          <p *ngIf="year.errors?.['invalid']">Specify a year number.</p>
          <p *ngIf="year.errors?.['max']">
            Year number can't be greater than {{ currentYear }}.
          </p>
          <p *ngIf="year.errors?.['min']">
            Year number can't be less than 1990.
          </p>
        </div>
      </div>

      <div class="estimate-page-form-input">
        <label for="estimate-page-input-lat">Latitude</label>
        <input
          id="estimate-page-input-lat"
          type="number"
          formControlName="lat"
          required
        />
        <div
          class="estimate-page-form-input-errors"
          *ngIf="lat.invalid && lat.touched && lat.dirty"
        >
          <p *ngIf="lat.errors?.['required']">Field is required.</p>
          <p *ngIf="lat.errors?.['invalid']">Specify a valid latitude value.</p>
          <p *ngIf="lat.errors?.['min']">Minimum value is -90.</p>
          <p *ngIf="lat.errors?.['max']">Maximum value is 90.</p>
        </div>
      </div>

      <div class="estimate-page-form-input">
        <label for="estimate-page-input-lng">Longitude</label>
        <input
          id="estimate-page-input-lng"
          type="number"
          formControlName="lng"
          required
        />
        <div
          class="estimate-page-form-input-errors"
          *ngIf="lng.invalid && lng.touched && lng.dirty"
        >
          <p *ngIf="lng.errors?.['required']">Field is required.</p>
          <p *ngIf="lng.errors?.['invalid']">
            Specify a valid longitude value.
          </p>
          <p *ngIf="lng.errors?.['min']">Minimum value is -180.</p>
          <p *ngIf="lng.errors?.['max']">Maximum value is 180.</p>
        </div>
      </div>
    </div>

    <button
      type="submit"
      class="submit-button"
      [disabled]="!estimateForm.valid"
    >
      Get estimate!
    </button>
  </form>

  <div
    *ngIf="similarReports.length; else elseBlock"
    class="estimate-page-price"
  >
    Estimate price for {{ estimateForm.value.make }}
    {{ estimateForm.value.model }} manufactured in
    {{ estimateForm.value.year }} is
    <span>{{ estimatePrice }}</span>
  </div>
  <ng-template #elseBlock>No reports found for your search</ng-template>

  <!-- <section *ngIf="similarReports.length">
    <ucea-report
      *ngFor="let report of similarReports"
      [report]="report"
    ></ucea-report>
  </section> -->
</section>
